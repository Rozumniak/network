(this["webpackJsonpreakt-kabzda-1"]=this["webpackJsonpreakt-kabzda-1"]||[]).push([[0],{22:function(e,t,s){e.exports={dialogs:"Dialogs_dialogs__3d0hk"}},28:function(e,t,s){e.exports={friend_ava:"TopFriends_friend_ava__38fXq",friend_name:"TopFriends_friend_name__thUpe"}},31:function(e,t,s){e.exports={item:"Post_item__qgLu_"}},32:function(e,t,s){e.exports={postsBlock:"MyPosts_postsBlock__IKVWh",posts:"MyPosts_posts__2281S"}},33:function(e,t,s){e.exports={discriptionBlock:"ProfileInfo_discriptionBlock__18aui",largeUserPhoto:"ProfileInfo_largeUserPhoto__2cOi9"}},34:function(e,t,s){e.exports={item:"Dialog_item__1E3wH",active:"Dialog_active__22o0r"}},35:function(e,t,s){e.exports={userPhoto:"Users_userPhoto__3V6cJ",selectedPage:"Users_selectedPage__30Z6v"}},37:function(e,t,s){e.exports={header:"Header_header__1Ya28",loginBlock:"Header_loginBlock__AUhM_"}},47:function(e,t,s){e.exports={item:"Message_item__3PE_v"}},53:function(e,t,s){},54:function(e,t,s){},61:function(e,t,s){},8:function(e,t,s){e.exports={nav:"Navbar_nav__1BCBQ",item:"Navbar_item__3RZJI",active:"Navbar_active__3bnlt",bestFriend:"Navbar_bestFriend__2bEkG",navbar:"Navbar_navbar__2QnsP"}},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s.n(n),r=s(23),i=s.n(r),c=(s(53),s(54),s(8)),o=s.n(c),u=s(5),l=s(28),d=s.n(l),j=s(0),h=function(e){return Object(j.jsx)("div",{className:d.a.best_friends,children:Object(j.jsxs)("div",{className:d.a.friend_ava,children:[Object(j.jsx)("img",{src:"https://www.nj.com/resizer/h8MrN0-Nw5dB5FOmMVGMmfVKFJo=/450x0/smart/cloudfront-us-east-1.images.arcpublishing.com/advancelocal/SJGKVE5UNVESVCW7BBOHKQCZVE.jpg"}),e.friendName]})})},f=function(e){var t=e.sidebar.friendName.map((function(e){return Object(j.jsx)(h,{friendName:e.friendsName})}));return Object(j.jsxs)("div",{className:o.a.navbar,children:[Object(j.jsxs)("nav",{className:o.a.nav,children:[Object(j.jsx)("div",{className:o.a.item,children:Object(j.jsx)(u.b,{to:"/profile",activeClassName:o.a.active,children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(j.jsx)("div",{className:o.a.item,children:Object(j.jsx)(u.b,{to:"/dialogs",activeClassName:o.a.active,children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"})}),Object(j.jsx)("div",{className:o.a.item,children:Object(j.jsx)(u.b,{to:"/news",activeClassName:o.a.active,children:" \u041d\u043e\u0432\u043e\u0441\u0442\u0438"})}),Object(j.jsx)("div",{className:o.a.item,children:Object(j.jsx)(u.b,{to:"/music",activeClassName:o.a.active,children:"\u041c\u0443\u0437\u044b\u043a\u0430"})}),Object(j.jsx)("div",{className:o.a.item,children:Object(j.jsx)(u.b,{to:"/settings",activeClassName:o.a.active,children:" \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}),Object(j.jsx)("div",{className:o.a.item,children:Object(j.jsx)(u.b,{to:"/users",activeClassName:o.a.active,children:" \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})})]}),Object(j.jsx)("div",{className:o.a.bestFriend,children:t})]})},p=s(2),b=s(13),O=s(14),g=s(16),m=s(15),x=s(31),v=s.n(x),P=s.p+"static/media/Curve-Loading.5e01ee79.gif",_=function(){return Object(j.jsx)("div",{children:Object(j.jsx)("img",{src:P})})},w=s.p+"static/media/1.a2446033.png",N=function(e){return e.profile?Object(j.jsxs)("div",{className:v.a.item,children:[Object(j.jsx)("img",{src:null!=e.profile.photos.small?e.profile.photos.small:w,className:v.a.userPhoto}),e.message,Object(j.jsx)("div",{children:Object(j.jsxs)("span",{children:["like ",e.like]})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(){},children:"Like"})})]}):null},T=s(32),C=s.n(T),S=function(e){var t=e.profilePage.posts.map((function(t){return Object(j.jsx)(N,{message:t.text,like:t.likesCount,dispatch:e.dispatch,profile:e.profile})})),s=a.a.createRef();return e.profile?Object(j.jsxs)("div",{className:C.a.postsBlock,children:[Object(j.jsx)("h3",{children:"My posts"}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:Object(j.jsx)("textarea",{onChange:function(){var t=s.current.value;e.onPostChange(t)},ref:s,value:e.profilePage.newPostText})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(){e.addPost()},children:"New post"})})]}),Object(j.jsx)("div",{className:C.a.posts,children:t})]}):null},k=(s(61),s(33)),U=s.n(k),E=function(e){Object(g.a)(s,e);var t=Object(m.a)(s);function s(){var e;Object(b.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={editMode:!1,localStatus:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.deactivateEditMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.localStatus)},e.updateText=function(t){e.setState({localStatus:t.currentTarget.value})},e}return Object(O.a)(s,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({localStatus:this.props.status})}},{key:"render",value:function(){return Object(j.jsxs)("div",{children:[!this.state.editMode&&Object(j.jsx)("div",{children:Object(j.jsx)("span",{onDoubleClick:this.activateEditMode,children:this.props.status||"------"})}),this.state.editMode&&Object(j.jsx)("div",{children:Object(j.jsx)("input",{autoFocus:!0,onBlur:this.deactivateEditMode,onChange:this.updateText,value:this.state.localStatus})})]})}}]),s}(a.a.Component),y=function(e){return e.profile?Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("img",{src:null!=e.profile.photos.large?e.profile.photos.large:w,className:U.a.largeUserPhoto}),Object(j.jsx)(E,{id:e.id,status:e.status,updateStatus:e.updateStatus})]}),Object(j.jsx)("div",{className:U.a.discriptionBlock,children:"avatar + description"})]}):Object(j.jsx)("div",{children:Object(j.jsx)(_,{})})},I=s(19),F=s(27).create({withCredentials:!0,headers:{"API-KEY":"f91eee3f-9dff-4917-9b8c-59b790c9fee2"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),M=function(e,t){return F.get("users?page=".concat(e," &count=").concat(t)).then((function(e){return e.data}))},A=function(e){return F.delete("follow/".concat(e))},D=function(e){return F.post("follow/".concat(e))},R=function(e){return F.get("profile/"+e)},L=function(e){return F.get("profile/status/"+e)},B=function(e){return F.put("profile/status",{status:e})},z="FOLLOW",G="UNFOLLOW",H="SET_USERS",V="SET_CURRENT_PAGE",W="SET_USERS_TOTAL_COUNT",J="TOGGLE_IS_FETCHING",Y="TOGGLE_IS_FOLLOWING_IN_PROGRESS",K={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},Q=function(e){return{type:z,userID:e}},X=function(e){return{type:G,userID:e}},Z=function(e){return{type:J,isFetching:e}},q=function(e,t){return{type:Y,isFollowing:e,userId:t}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(p.a)(Object(p.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(p.a)(Object(p.a)({},e),{},{followed:!0}):e}))});case G:return Object(p.a)(Object(p.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userID?Object(p.a)(Object(p.a)({},e),{},{followed:!1}):e}))});case H:return Object(p.a)(Object(p.a)({},e),{},{users:t.users});case V:return Object(p.a)(Object(p.a)({},e),{},{currentPage:t.currentPage});case W:return Object(p.a)(Object(p.a)({},e),{},{totalUsersCount:t.count});case J:return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case Y:return Object(p.a)(Object(p.a)({},e),{},{followingInProgress:t.isFollowing?[].concat(Object(I.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!=t.userId}))});default:return e}},ee="ADD-POST",te="UPDATE-NEW-POST-TEXT",se="SET_USER_PROFILE",ne="SET_USER_STATUS",ae="STATUS_UPDATE",re={posts:[{id:1,text:"Hello world",likesCount:12},{id:2,text:"This is my first post",likesCount:10},{id:3,text:"Yo, i know what is the .map",likesCount:10},{id:4,text:"Motherfucker",likesCount:10},{id:5,text:"Component- is the great thing",likesCount:22},{id:6,text:"I know what is the props",likesCount:30},{id:7,text:"Component- is the great thing",likesCount:1}],newPostText:"kek",profile:null,status:""},ie=function(e){return{type:se,profile:e}},ce=function(e){return{type:ne,status:e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:var s=e.newPostText;return Object(p.a)(Object(p.a)({},e),{},{newPostText:"",posts:[].concat(Object(I.a)(e.posts),[{id:6,text:s,likesCount:0}])});case te:return Object(p.a)(Object(p.a)({},e),{},{newPostText:t.newText});case se:return Object(p.a)(Object(p.a)({},e),{},{profile:t.profile});case ne:return Object(p.a)(Object(p.a)({},e),{},{status:t.status});case ae:return Object(p.a)(Object(p.a)({},e),{},{statusInProgress:t.isUpdate});default:return e}},ue=s(7),le=Object(ue.b)((function(e){return{profilePage:e.profilePage,profile:e.profilePage.profile}}),(function(e){return{addPost:function(t){e({type:ee})},onPostChange:function(t){var s=function(e){return{type:te,newText:e}}(t);e(s)}}}))(S),de=function(e){return Object(j.jsxs)("div",{className:"",children:[Object(j.jsx)(y,{profile:e.profile,id:e.id,status:e.status,updateStatus:e.updateStatus}),Object(j.jsx)(le,{})]})},je=s(4),he=function(e){return{isAuth:e.authReducer.isAuth}},fe=function(e){var t=function(t){Object(g.a)(n,t);var s=Object(m.a)(n);function n(){return Object(b.a)(this,n),s.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){return this.props.isAuth?Object(j.jsx)(e,Object(p.a)({},this.props)):Object(j.jsx)(je.a,{to:"/login"})}}]),n}(a.a.Component);return Object(ue.b)(he)(t)},pe=s(17),be=function(e){Object(g.a)(s,e);var t=Object(m.a)(s);function s(){return Object(b.a)(this,s),t.apply(this,arguments)}return Object(O.a)(s,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userID;e||(e=this.props.id),this.props.getProfileTh(e),this.props.getUserStatusTh(e)}},{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)(de,Object(p.a)(Object(p.a)({},this.props),{},{profile:this.props.profile,id:this.props.id,status:this.props.status,updateStatus:this.props.updateStatusTh}))})}}]),s}(a.a.Component),Oe=Object(pe.c)(Object(ue.b)((function(e){return{profile:e.profilePage.profile,id:e.authReducer.id,status:e.profilePage.status}}),{setUserProfile:ie,getProfileTh:function(e){return function(t){R(e).then((function(e){t(ie(e.data))}))}},getUserStatusTh:function(e){return function(t){L(e).then((function(e){t(ce(e.data))}))}},updateStatusTh:function(e){return function(t){B(e).then((function(s){0===s.data.resultCode&&t(ce(e))}))}}}),je.f,fe)(be),ge=s(22),me=s.n(ge),xe=s(34),ve=s.n(xe),Pe=function(e){var t="/dialogs/"+e.id;return Object(j.jsx)("div",{className:ve.a.item,children:Object(j.jsxs)(u.b,{to:t,activeClassName:ve.a.active,children:[" ",e.name]})})},_e=s(47),we=s.n(_e),Ne=function(e){return Object(j.jsx)("div",{className:we.a.item,children:e.messages})},Te=function(e){var t=e.messagesPage.messages.map((function(e){return Object(j.jsx)(Ne,{messages:e.message})})),s=a.a.createRef(),n=e.messagesPage.dialogs.map((function(e){return Object(j.jsx)(Pe,{name:e.name,activeClassName:me.a.active,id:e.id})}));return Object(j.jsxs)("div",{className:me.a.dialogs,children:[Object(j.jsx)("div",{className:me.a.dialogsItem,children:n}),Object(j.jsxs)("div",{className:me.a.messages,children:[t,Object(j.jsx)("div",{children:Object(j.jsx)("textarea",{onChange:function(){var t=s.current.value;e.messageChange(t)},ref:s,value:e.messagesPage.messageText})}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{onClick:function(){e.sendMessage()},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})})]})]})},Ce=(s(80),function(e){return Object(j.jsx)("div",{children:"News"})}),Se=(s(81),function(e){return Object(j.jsx)("div",{children:"Music"})}),ke=(s(82),function(e){return Object(j.jsx)("div",{children:"Settings"})}),Ue="SEND-MESSAGE",Ee="UPDATE-NEW-MESSAGE-TEXT",ye={dialogs:[{id:1,name:"Ruslan"},{id:2,name:"Ihor"},{id:3,name:"Diana"}],messages:[{id:1,message:"Hello world"},{id:2,message:"Yo"},{id:3,message:"Yo"},{id:3,message:"Yawawdaao"}],messageText:"lol"},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ue:var s=e.messageText;return Object(p.a)(Object(p.a)({},e),{},{messageText:"",messages:[].concat(Object(I.a)(e.messages),[{id:1,message:s}])});case Ee:return Object(p.a)(Object(p.a)({},e),{},{messageText:t.messageText});default:return e}},Fe=Object(pe.c)(Object(ue.b)((function(e){return{messagesPage:e.messagesPage}}),(function(e){return{sendMessage:function(){e({type:Ue})},messageChange:function(t){var s={type:Ee,messageText:t};e(s)}}})),fe)(Te),Me=Object(ue.b)((function(e){return{sidebar:e.sidebar}}),(function(){return{}}))(f),Ae=s(21),De=s(35),Re=s.n(De),Le=(s(46),s(85)),Be=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),s=[],n=1;n<=t;n++)s.push(n);return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:s.map((function(t){return Object(j.jsx)(Le.a,{variant:"secondary",size:"sm",className:e.currentPage===t&&Re.a.selectedPage,onClick:function(s){e.onPageChange(t)},children:t})}))}),e.users.map((function(t){return Object(j.jsxs)("div",{children:[Object(j.jsxs)("span",{children:[Object(j.jsx)("div",{children:Object(j.jsx)(u.b,{to:"/profile/"+t.id,children:Object(j.jsx)("img",{src:null!=t.photos.small?t.photos.small:w,className:Re.a.userPhoto})})}),Object(j.jsx)("div",{children:t.followed?Object(j.jsx)(Le.a,{size:"sm",disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unfollow(t.id)},children:" Unfollow "}):Object(j.jsx)(Le.a,{size:"sm",disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)},children:"Follow"})})]}),Object(j.jsxs)("span",{children:[Object(j.jsxs)("span",{children:[Object(j.jsx)("div",{children:t.name}),Object(j.jsx)("div",{children:t.status})]}),Object(j.jsxs)("span",{children:[Object(j.jsx)("div",{children:'"u.location.country"'}),Object(j.jsx)("div",{children:"u.location.city"})]})]})]},t.id)}))]})},ze=function(e){Object(g.a)(s,e);var t=Object(m.a)(s);function s(){var e;Object(b.a)(this,s);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).onPageChange=function(t){e.props.getUsersTh(t,e.props.pageSize)},e}return Object(O.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsersTh(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){var e;return Object(j.jsxs)(j.Fragment,{children:[this.props.isFetching?Object(j.jsx)(_,{}):null,Object(j.jsx)(Be,(e={totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChange:this.onPageChange,follow:this.props.follow,unfollow:this.props.unfollow,users:this.props.users,isFetching:this.props.isFetching,followingInProgress:this.props.followingInProgress,toggleFollowingInProgress:this.props.toggleFollowingInProgress},Object(Ae.a)(e,"unfollow",this.props.unfollowTh),Object(Ae.a)(e,"follow",this.props.followTh),e))]})}}]),s}(a.a.Component),Ge=Object(pe.c)(fe,Object(ue.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{follow:Q,unfollow:X,setCurrentPage:function(e){return{type:V,currentPage:e}},getUsersTh:function(e,t){return function(s){s(Z(!0)),M(e,t).then((function(e){var t,n;s(Z(!1)),s((t=e.items,{type:H,users:t})),s((n=e.totalCount,{type:W,count:n}))}))}},unfollowTh:function(e){return function(t){t(q(!0,e)),A(e).then((function(s){0==s.data.resultCode&&t(X(e)),t(q(!1,e))}))}},followTh:function(e){return function(t){t(q(!0,e)),D(e).then((function(s){0==s.data.resultCode&&t(Q(e)),t(q(!1,e))}))}}}))(ze),He=s(37),Ve=s.n(He),We=function(e){return Object(j.jsxs)("header",{className:Ve.a.header,children:[Object(j.jsx)("img",{src:"https://logoza.ru/img/rock.png"}),Object(j.jsx)("div",{className:Ve.a.loginBlock,children:e.isAuth?Object(j.jsxs)("div",{children:[" ",e.login]}):Object(j.jsx)(u.b,{to:"/login",children:"Login"})})]})},Je="SET_USER_DATA",Ye="SET_AUTH_PROFILE",Ke={id:null,login:null,email:null,isAuth:!1,isFetching:!1,authUserProfile:null},Qe=function(e,t,s){return{type:Je,data:{id:e,login:t,email:s}}},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:return Object(p.a)(Object(p.a)(Object(p.a)({},e),t.data),{},{isAuth:!0});case Ye:return Object(p.a)(Object(p.a)({},e),{},{authUserProfile:t.authProfile});default:return e}},Ze=function(e){Object(g.a)(s,e);var t=Object(m.a)(s);function s(){return Object(b.a)(this,s),t.apply(this,arguments)}return Object(O.a)(s,[{key:"componentDidMount",value:function(){this.props.authMeTh()}},{key:"render",value:function(){return Object(j.jsx)(We,Object(p.a)({},this.props))}}]),s}(a.a.Component),qe=Object(ue.b)((function(e){return{login:e.authReducer.login,isAuth:e.authReducer.isAuth,authUserProfile:e.authReducer.authUserProfile}}),{setAuthUserData:Qe,setAuthUserProfile:function(e){return{type:Ye,authProfile:e}},authMeTh:function(){return function(e){F.get("auth/me").then((function(t){if(0===t.data.resultCode){var s=t.data.data,n=s.id,a=s.login,r=s.email;e(Qe(n,a,r))}}))}}})(Ze),$e=function(e){return Object(j.jsx)("h1",{children:"Login"})},et=function(){return Object(j.jsxs)("div",{className:"app-wrapper",children:[Object(j.jsx)(qe,{}),Object(j.jsxs)("div",{className:"app-wrapper-content",children:[Object(j.jsx)(je.b,{path:"/dialogs",render:function(){return Object(j.jsx)(Fe,{})}}),Object(j.jsx)(je.b,{path:"/profile/:userID?",render:function(){return Object(j.jsx)(Oe,{})}}),Object(j.jsx)(je.b,{path:"/news",render:function(){return Object(j.jsx)(Ce,{})}}),Object(j.jsx)(je.b,{path:"/music",render:function(){return Object(j.jsx)(Se,{})}}),Object(j.jsx)(je.b,{path:"/settings",render:function(){return Object(j.jsx)(ke,{})}}),Object(j.jsx)(je.b,{path:"/users",render:function(){return Object(j.jsx)(Ge,{})}}),Object(j.jsx)(je.b,{path:"/login",render:function(){return Object(j.jsx)($e,{})}})]}),Object(j.jsx)(Me,{})]})},tt={friendName:[{friendsName:"Diana"},{friendsName:"Ihor"},{friendsName:"Ruslan"}]},st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt;return e},nt=s(48),at=Object(pe.b)({profilePage:oe,messagesPage:Ie,sidebar:st,usersPage:$,authReducer:Xe}),rt=Object(pe.d)(at,Object(pe.a)(nt.a));window.store=rt;var it=rt;i.a.render(Object(j.jsx)(u.a,{children:Object(j.jsx)(ue.a,{store:it,children:Object(j.jsx)(et,{})})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.96176c78.chunk.js.map